import{a7 as M,g as z,b as H,$ as N,C as k,r as X,E as D,a1 as I,a0 as $,q as _,m as j,J as q,an as A}from"./B91_JGNm.js";import{P as x}from"./ln9MLy3v.js";import{g as U,c as F,u as T,e as S,q as P,k as J,m as K,a1 as V,r as G}from"./1AO-i3Qm.js";import{t as Q}from"./Cl2ZIHhT.js";let b;const Z=e=>{var n;if(!U)return 0;if(b!==void 0)return b;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const l=t.offsetWidth;t.style.overflow="scroll";const o=document.createElement("div");o.style.width="100%",t.appendChild(o);const a=o.offsetWidth;return(n=t.parentNode)==null||n.removeChild(t),b=l-a,b},R=e=>{if(!e)return{onClick:M,onMousedown:M,onMouseup:M};let n=!1,t=!1;return{onClick:s=>{n&&t&&e(s),n=t=!1},onMousedown:s=>{n=s.target===s.currentTarget},onMouseup:s=>{t=s.target===s.currentTarget}}},ee=F({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:S([String,Array,Object])},zIndex:{type:S([String,Number])}}),te={click:e=>e instanceof MouseEvent},oe="overlay";var ne=z({name:"ElOverlay",props:ee,emits:te,setup(e,{slots:n,emit:t}){const l=T(oe),o=d=>{t("click",d)},{onClick:a,onMousedown:s,onMouseup:u}=R(e.customMaskEvent?void 0:o);return()=>e.mask?H("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:s,onMouseup:u},[k(n,"default")],x.STYLE|x.CLASS|x.PROPS,["onClick","onMouseup","onMousedown"]):N("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[k(n,"default")])}});const ie=ne,ue=(e,n,t,l)=>{const o={offsetX:0,offsetY:0},a=X(!1),s=(c,i)=>{if(e.value){const{offsetX:p,offsetY:h}=o,r=e.value.getBoundingClientRect(),m=r.left,f=r.top,y=r.width,w=r.height,C=document.documentElement.clientWidth,L=document.documentElement.clientHeight,Y=-m+p,O=-f+h,W=C-m-y+p,B=L-f-(w<L?w:0)+h;l?.value||(c=Math.min(Math.max(c,Y),W),i=Math.min(Math.max(i,O),B)),o.offsetX=c,o.offsetY=i,e.value.style.transform=`translate(${P(c)}, ${P(i)})`}},u=c=>{const i=c.clientX,p=c.clientY,{offsetX:h,offsetY:r}=o,m=y=>{a.value||(a.value=!0);const w=h+y.clientX-i,C=r+y.clientY-p;s(w,C)},f=()=>{a.value=!1,document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",f)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",f)},d=()=>{n.value&&e.value&&(n.value.addEventListener("mousedown",u),window.addEventListener("resize",E))},v=()=>{n.value&&e.value&&(n.value.removeEventListener("mousedown",u),window.removeEventListener("resize",E))},g=()=>{o.offsetX=0,o.offsetY=0,e.value&&(e.value.style.transform="")},E=()=>{const{offsetX:c,offsetY:i}=o;s(c,i)};return D(()=>{I(()=>{t.value?d():v()})}),$(()=>{v()}),{isDragging:a,resetPosition:g,updatePosition:E}},re=(e,n={})=>{_(e)||Q("[useLockscreen]","You need to pass a ref param to this function");const t=n.ns||T("popup"),l=j(()=>t.bm("parent","hidden"));let o=0,a=!1,s="0";const u=()=>{setTimeout(()=>{typeof document>"u"||a&&document&&(document.body.style.width=s,G(document.body,l.value))},200)};q(e,d=>{if(!d){u();return}a=!J(document.body,l.value),a&&(s=document.body.style.width,K(document.body,l.value)),o=Z(t.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,g=V(document.body,"overflowY");o>0&&(v||g==="scroll")&&a&&(document.body.style.width=`calc(100% - ${o}px)`)}),A(()=>u())};export{ie as E,re as a,R as b,ue as u};
