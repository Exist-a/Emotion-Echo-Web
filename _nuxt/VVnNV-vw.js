import{u as D,a as X}from"./B4Eicqft.js";import{g as M,i as Q,r as v,m as L,a0 as ae,ac as Y,j as $,o as R,w as ee,y as oe,a as j,A as se,B as P,p as z,v as I,a3 as re,ae as ne,c as te,b as q,F as ie,J as F,G as ce,H as ue,as as fe,E as ve,D as G,Z as de,N as me,C as pe,L as he,V as be}from"./B91_JGNm.js";import{c as K,_ as U,u as le,g as ge,i as N,e as ye,q as J,w as Se}from"./1AO-i3Qm.js";import{t as we,u as ze}from"./Cl2ZIHhT.js";const C=4,_e={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Ee=({move:p,size:d,bar:s})=>({[s.size]:d,transform:`translate${s.axis}(${p}%)`}),V=Symbol("scrollbarContextKey"),He=K({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Te="Thumb",Ce=M({__name:"thumb",props:He,setup(p){const d=p,s=Q(V),l=le("scrollbar");s||we(Te,"can not inject scrollbar context");const c=v(),m=v(),y=v({}),h=v(!1);let r=!1,n=!1,f=0,S=0,a=ge?document.onselectstart:null;const e=L(()=>_e[d.vertical?"vertical":"horizontal"]),b=L(()=>Ee({size:d.size,move:d.move,bar:e.value})),g=L(()=>c.value[e.value.offset]**2/s.wrapElement[e.value.scrollSize]/d.ratio/m.value[e.value.offset]),T=i=>{var w;if(i.stopPropagation(),i.ctrlKey||[1,2].includes(i.button))return;(w=window.getSelection())==null||w.removeAllRanges(),H(i);const u=i.currentTarget;u&&(y.value[e.value.axis]=u[e.value.offset]-(i[e.value.client]-u.getBoundingClientRect()[e.value.direction]))},E=i=>{if(!m.value||!c.value||!s.wrapElement)return;const w=Math.abs(i.target.getBoundingClientRect()[e.value.direction]-i[e.value.client]),u=m.value[e.value.offset]/2,t=(w-u)*100*g.value/c.value[e.value.offset];s.wrapElement[e.value.scroll]=t*s.wrapElement[e.value.scrollSize]/100},H=i=>{i.stopImmediatePropagation(),r=!0,f=s.wrapElement.scrollHeight,S=s.wrapElement.scrollWidth,document.addEventListener("mousemove",B),document.addEventListener("mouseup",k),a=document.onselectstart,document.onselectstart=()=>!1},B=i=>{if(!c.value||!m.value||r===!1)return;const w=y.value[e.value.axis];if(!w)return;const u=(c.value.getBoundingClientRect()[e.value.direction]-i[e.value.client])*-1,t=m.value[e.value.offset]-w,o=(u-t)*100*g.value/c.value[e.value.offset];e.value.scroll==="scrollLeft"?s.wrapElement[e.value.scroll]=o*S/100:s.wrapElement[e.value.scroll]=o*f/100},k=()=>{r=!1,y.value[e.value.axis]=0,document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",k),A(),n&&(h.value=!1)},W=()=>{n=!1,h.value=!!d.size},x=()=>{n=!0,h.value=r};ae(()=>{A(),document.removeEventListener("mouseup",k)});const A=()=>{document.onselectstart!==a&&(document.onselectstart=a)};return D(Y(s,"scrollbarElement"),"mousemove",W),D(Y(s,"scrollbarElement"),"mouseleave",x),(i,w)=>(R(),$(ne,{name:z(l).b("fade"),persisted:""},{default:ee(()=>[oe(j("div",{ref_key:"instance",ref:c,class:P([z(l).e("bar"),z(l).is(z(e).key)]),onMousedown:E,onClick:se(()=>{},["stop"])},[j("div",{ref_key:"thumb",ref:m,class:P(z(l).e("thumb")),style:I(z(b)),onMousedown:T},null,38)],42,["onClick"]),[[re,i.always||h.value]])]),_:1},8,["name"]))}});var Z=U(Ce,[["__file","thumb.vue"]]);const Le=K({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),ke=M({__name:"bar",props:Le,setup(p,{expose:d}){const s=p,l=Q(V),c=v(0),m=v(0),y=v(""),h=v(""),r=v(1),n=v(1);return d({handleScroll:a=>{if(a){const e=a.offsetHeight-C,b=a.offsetWidth-C;m.value=a.scrollTop*100/e*r.value,c.value=a.scrollLeft*100/b*n.value}},update:()=>{const a=l?.wrapElement;if(!a)return;const e=a.offsetHeight-C,b=a.offsetWidth-C,g=e**2/a.scrollHeight,T=b**2/a.scrollWidth,E=Math.max(g,s.minSize),H=Math.max(T,s.minSize);r.value=g/(e-g)/(E/(e-E)),n.value=T/(b-T)/(H/(b-H)),h.value=E+C<e?`${E}px`:"",y.value=H+C<b?`${H}px`:""}}),(a,e)=>(R(),te(ie,null,[q(Z,{move:c.value,ratio:n.value,size:y.value,always:a.always},null,8,["move","ratio","size","always"]),q(Z,{move:m.value,ratio:r.value,size:h.value,vertical:"",always:a.always},null,8,["move","ratio","size","always"])],64))}});var Ne=U(ke,[["__file","bar.vue"]]);const Re=K({distance:{type:Number,default:0},height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:ye([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...ze(["ariaLabel","ariaOrientation"])}),Pe={"end-reached":p=>["left","right","top","bottom"].includes(p),scroll:({scrollTop:p,scrollLeft:d})=>[p,d].every(N)},Be="ElScrollbar",xe=M({name:Be}),Ae=M({...xe,props:Re,emits:Pe,setup(p,{expose:d,emit:s}){const l=p,c=le("scrollbar");let m,y,h,r=0,n=0,f="";const S={bottom:!1,top:!1,right:!1,left:!1},a=v(),e=v(),b=v(),g=v(),T=L(()=>{const t={},o=J(l.height),_=J(l.maxHeight);return o&&(t.height=o),_&&(t.maxHeight=_),[l.wrapStyle,t]}),E=L(()=>[l.wrapClass,c.e("wrap"),{[c.em("wrap","hidden-default")]:!l.native}]),H=L(()=>[c.e("view"),l.viewClass]),B=t=>{var o;return(o=S[t])!=null?o:!1},k={top:"bottom",bottom:"top",left:"right",right:"left"},W=t=>{const o=k[f];if(!o)return;const _=t[f],O=t[o];_&&!S[f]&&(S[f]=!0),!O&&S[o]&&(S[o]=!1)},x=()=>{var t;if(e.value){(t=g.value)==null||t.handleScroll(e.value);const o=r,_=n;r=e.value.scrollTop,n=e.value.scrollLeft;const O={bottom:r+e.value.clientHeight>=e.value.scrollHeight-l.distance,top:r<=l.distance&&o!==0,right:n+e.value.clientWidth>=e.value.scrollWidth-l.distance&&_!==n,left:n<=l.distance&&_!==0};if(s("scroll",{scrollTop:r,scrollLeft:n}),o!==r&&(f=r>o?"bottom":"top"),_!==n&&(f=n>_?"right":"left"),l.distance>0){if(B(f))return;W(O)}O[f]&&s("end-reached",f)}};function A(t,o){be(t)?e.value.scrollTo(t):N(t)&&N(o)&&e.value.scrollTo(t,o)}const i=t=>{N(t)&&(e.value.scrollTop=t)},w=t=>{N(t)&&(e.value.scrollLeft=t)},u=()=>{var t;(t=g.value)==null||t.update(),S[f]=!1};return F(()=>l.noresize,t=>{t?(m?.(),y?.(),h?.()):({stop:m}=X(b,u),{stop:y}=X(e,u),h=D("resize",u))},{immediate:!0}),F(()=>[l.maxHeight,l.height],()=>{l.native||G(()=>{var t;u(),e.value&&((t=g.value)==null||t.handleScroll(e.value))})}),ce(V,ue({scrollbarElement:a,wrapElement:e})),fe(()=>{e.value&&(e.value.scrollTop=r,e.value.scrollLeft=n)}),ve(()=>{l.native||G(()=>{u()})}),de(()=>u()),d({wrapRef:e,update:u,scrollTo:A,setScrollTop:i,setScrollLeft:w,handleScroll:x}),(t,o)=>(R(),te("div",{ref_key:"scrollbarRef",ref:a,class:P(z(c).b())},[j("div",{ref_key:"wrapRef",ref:e,class:P(z(E)),style:I(z(T)),tabindex:t.tabindex,onScroll:x},[(R(),$(he(t.tag),{id:t.id,ref_key:"resizeRef",ref:b,class:P(z(H)),style:I(t.viewStyle),role:t.role,"aria-label":t.ariaLabel,"aria-orientation":t.ariaOrientation},{default:ee(()=>[pe(t.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),t.native?me("v-if",!0):(R(),$(Ne,{key:0,ref_key:"barRef",ref:g,always:t.always,"min-size":t.minSize},null,8,["always","min-size"]))],2))}});var Oe=U(Ae,[["__file","scrollbar.vue"]]);const je=Se(Oe);export{je as E};
