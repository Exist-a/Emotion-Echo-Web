import{g as j,r as K,m as h,E as Q,j as C,o as p,w as N,y as M,a as b,v as z,p as a,B as y,N as _,L as F,t as x,C as J,c as O,F as R,a3 as P,A as X,ae as Y,x as B,Q as L,b as ee,S as te,U as A}from"./B91_JGNm.js";import{u as oe,g as ne,E as I}from"./B4Eicqft.js";import{c as se,z as ie,p as $,e as w,_ as ae,T as D,E as V,H as le,g as re,l as U,h as ce,I as fe}from"./1AO-i3Qm.js";import{q as ue}from"./BH2NPJ5c.js";const q=["primary","success","info","warning","error"],de=se({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:$},id:{type:String,default:""},message:{type:w([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:w(Function),default:()=>{}},onClose:{type:w(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...q,""],default:""},zIndex:Number,closeIcon:{type:$,default:ie}}),pe={destroy:()=>!0},me=j({name:"ElNotification"}),ve=j({...me,props:de,emits:pe,setup(e,{expose:s}){const t=e,{ns:n,zIndex:r}=ue("notification"),{nextZIndex:f,currentZIndex:c}=r,i=K(!1);let u;const l=h(()=>{const o=t.type;return o&&D[t.type]?n.m(o):""}),d=h(()=>t.type&&D[t.type]||t.icon),v=h(()=>t.position.endsWith("right")?"right":"left"),k=h(()=>t.position.startsWith("top")?"top":"bottom"),Z=h(()=>{var o;return{[k.value]:`${t.offset}px`,zIndex:(o=t.zIndex)!=null?o:c.value}});function S(){t.duration>0&&({stop:u}=le(()=>{i.value&&E()},t.duration))}function H(){u?.()}function E(){i.value=!1}function G(o){switch(ne(o)){case I.delete:case I.backspace:H();break;case I.esc:i.value&&E();break;default:S();break}}return Q(()=>{S(),f(),i.value=!0}),oe(document,"keydown",G),s({visible:i,close:E}),(o,W)=>(p(),C(Y,{name:a(n).b("fade"),onBeforeLeave:o.onClose,onAfterLeave:Ee=>o.$emit("destroy"),persisted:""},{default:N(()=>[M(b("div",{id:o.id,class:y([a(n).b(),o.customClass,a(v)]),style:z(a(Z)),role:"alert",onMouseenter:H,onMouseleave:S,onClick:o.onClick},[a(d)?(p(),C(a(V),{key:0,class:y([a(n).e("icon"),a(l)])},{default:N(()=>[(p(),C(F(a(d))))]),_:1},8,["class"])):_("v-if",!0),b("div",{class:y(a(n).e("group"))},[b("h2",{class:y(a(n).e("title")),textContent:x(o.title)},null,10,["textContent"]),M(b("div",{class:y(a(n).e("content")),style:z(o.title?void 0:{margin:0})},[J(o.$slots,"default",{},()=>[o.dangerouslyUseHTMLString?(p(),O(R,{key:1},[_(" Caution here, message could've been compromised, never use user's input as message "),b("p",{innerHTML:o.message},null,8,["innerHTML"])],2112)):(p(),O("p",{key:0},x(o.message),1))])],6),[[P,o.message]]),o.showClose?(p(),C(a(V),{key:0,class:y(a(n).e("closeBtn")),onClick:X(E,["stop"])},{default:N(()=>[(p(),C(F(o.closeIcon)))]),_:1},8,["class","onClick"])):_("v-if",!0)],2)],46,["id","onClick"]),[[P,i.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var ye=ae(ve,[["__file","notification.vue"]]);const g={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},T=16;let ge=1;const m=function(e={},s){if(!re)return{close:()=>{}};(B(e)||L(e))&&(e={message:e});const t=e.position||"top-right";let n=e.offset||0;g[t].forEach(({vm:d})=>{var v;n+=(((v=d.el)==null?void 0:v.offsetHeight)||0)+T}),n+=T;const r=`notification_${ge++}`,f=e.onClose,c={...e,offset:n,id:r,onClose:()=>{he(r,t,f)}};let i=document.body;U(e.appendTo)?i=e.appendTo:B(e.appendTo)&&(i=document.querySelector(e.appendTo)),U(i)||(i=document.body);const u=document.createElement("div"),l=ee(ye,c,te(c.message)?c.message:L(c.message)?()=>c.message:null);return l.appContext=ce(s)?m._context:s,l.props.onDestroy=()=>{A(null,u)},A(l,u),g[t].push({vm:l}),i.appendChild(u.firstElementChild),{close:()=>{l.component.exposed.visible.value=!1}}};q.forEach(e=>{m[e]=(s={},t)=>((B(s)||L(s))&&(s={message:s}),m({...s,type:e},t))});function he(e,s,t){const n=g[s],r=n.findIndex(({vm:l})=>{var d;return((d=l.component)==null?void 0:d.props.id)===e});if(r===-1)return;const{vm:f}=n[r];if(!f)return;t?.(f);const c=f.el.offsetHeight,i=s.split("-")[0];n.splice(r,1);const u=n.length;if(!(u<1))for(let l=r;l<u;l++){const{el:d,component:v}=n[l].vm,k=Number.parseInt(d.style[i],10)-c-T;v.props.offset=k}}function Ce(){for(const e of Object.values(g))e.forEach(({vm:s})=>{s.component.exposed.visible.value=!1})}function be(e="top-right"){var s,t,n,r;let f=((n=(t=(s=g[e][0])==null?void 0:s.vm.component)==null?void 0:t.props)==null?void 0:n.offset)||0;for(const{vm:c}of g[e])c.component.props.offset=f,f+=(((r=c.el)==null?void 0:r.offsetHeight)||0)+T}m.closeAll=Ce;m.updateOffsets=be;m._context=null;const _e=fe(m,"$notify");export{_e as E};
