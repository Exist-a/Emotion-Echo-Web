import{x as ae,m as y,W as Te,aa as G,r as K,J,S as Ce,p as t,D as k,g as Ve,ar as Ze,a5 as qe,E as Qe,ac as et,c as E,o as h,N as g,F as ne,a as O,B as x,C as X,j as I,w as $,L as H,K as Se,A as se,a7 as ie,t as _,v as Ee,V as Ie}from"./B91_JGNm.js";import{i as tt,u as le,a as ot}from"./B4Eicqft.js";import{i as Ne,c as at,e as M,p as re,x as nt,a8 as st,_ as it,u as ze,a9 as lt,aa as rt,ab as ut,A as dt,E as D,g as ct,w as pt}from"./1AO-i3Qm.js";import{u as ft,a as mt,b as vt,d as ht,e as yt}from"./BH2NPJ5c.js";import{m as gt}from"./Bp3YSIOJ.js";import{u as bt,e as wt,d as Pe}from"./Cl2ZIHhT.js";import{U as Z,I as ue,C as Fe}from"./BB_Ol6Sd.js";let C;const xt={height:"0",visibility:"hidden",overflow:tt()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Ct=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],Me=a=>{const s=Number.parseFloat(a);return Number.isNaN(s)?a:s};function St(a){const s=window.getComputedStyle(a),i=s.getPropertyValue("box-sizing"),o=Number.parseFloat(s.getPropertyValue("padding-bottom"))+Number.parseFloat(s.getPropertyValue("padding-top")),u=Number.parseFloat(s.getPropertyValue("border-bottom-width"))+Number.parseFloat(s.getPropertyValue("border-top-width"));return{contextStyle:Ct.map(c=>[c,s.getPropertyValue(c)]),paddingSize:o,borderSize:u,boxSizing:i}}function ke(a,s=1,i){var o,u;C||(C=document.createElement("textarea"),((o=a.parentNode)!=null?o:document.body).appendChild(C));const{paddingSize:d,borderSize:c,boxSizing:l,contextStyle:f}=St(a);f.forEach(([w,p])=>C?.style.setProperty(w,p)),Object.entries(xt).forEach(([w,p])=>C?.style.setProperty(w,p,"important")),C.value=a.value||a.placeholder||"";let m=C.scrollHeight;const v={};l==="border-box"?m=m+c:l==="content-box"&&(m=m-d),C.value="";const z=C.scrollHeight-d;if(Ne(s)){let w=z*s;l==="border-box"&&(w=w+d+c),m=Math.max(w,m),v.minHeight=`${w}px`}if(Ne(i)){let w=z*i;l==="border-box"&&(w=w+d+c),m=Math.min(w,m)}return v.height=`${m}px`,(u=C.parentNode)==null||u.removeChild(C),C=void 0,v}const Et=at({id:{type:String,default:void 0},size:ft,disabled:{type:Boolean,default:void 0},modelValue:{type:M([String,Number,Object]),default:""},modelModifiers:{type:M(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:M(String),default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:M([Boolean,Object]),default:!1},autocomplete:{type:M(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:re,default:nt},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:["inside","outside"],default:"inside"},suffixIcon:{type:re},prefixIcon:{type:re},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:M([Object,Array,String]),default:()=>gt({})},autofocus:Boolean,rows:{type:Number,default:2},...bt(["ariaLabel"]),inputmode:{type:M(String),default:void 0},name:String}),It={[Z]:a=>ae(a),input:a=>ae(a),change:(a,s)=>ae(a)&&(s instanceof Event||s===void 0),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent},Nt=["class","style"],zt=/^on[A-Z]/,Pt=(a={})=>{const{excludeListeners:s=!1,excludeKeys:i}=a,o=y(()=>(i?.value||[]).concat(Nt)),u=Te();return u?y(()=>{var d;return st(Object.entries((d=u.proxy)==null?void 0:d.$attrs).filter(([c])=>!o.value.includes(c)&&!(s&&zt.test(c))))}):y(()=>({}))};function Ft(a,{disabled:s,beforeFocus:i,afterFocus:o,beforeBlur:u,afterBlur:d}={}){const c=Te(),{emit:l}=c,f=G(),m=K(!1),v=p=>{const n=Ce(i)?i(p):!1;t(s)||m.value||n||(m.value=!0,l("focus",p),o?.())},z=p=>{var n;const P=Ce(u)?u(p):!1;t(s)||p.relatedTarget&&((n=f.value)!=null&&n.contains(p.relatedTarget))||P||(m.value=!1,l("blur",p),d?.())},w=p=>{var n,P;t(s)||wt(p.target)||(n=f.value)!=null&&n.contains(document.activeElement)&&f.value!==document.activeElement||(P=a.value)==null||P.focus()};return J([f,()=>t(s)],([p,n])=>{p&&(n?p.removeAttribute("tabindex"):p.setAttribute("tabindex","-1"))}),le(f,"focus",v,!0),le(f,"blur",z,!0),le(f,"click",w,!0),{isFocused:m,wrapperRef:f,handleFocus:v,handleBlur:z}}const Mt=a=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(a);function kt({afterComposition:a,emit:s}){const i=K(!1),o=l=>{s?.("compositionstart",l),i.value=!0},u=l=>{var f;s?.("compositionupdate",l);const m=(f=l.target)==null?void 0:f.value,v=m[m.length-1]||"";i.value=!Mt(v)},d=l=>{s?.("compositionend",l),i.value&&(i.value=!1,k(()=>a(l)))};return{isComposing:i,handleComposition:l=>{l.type==="compositionend"?d(l):u(l)},handleCompositionStart:o,handleCompositionUpdate:u,handleCompositionEnd:d}}function Tt(a){let s;function i(){if(a.value==null)return;const{selectionStart:u,selectionEnd:d,value:c}=a.value;if(u==null||d==null)return;const l=c.slice(0,Math.max(0,u)),f=c.slice(Math.max(0,d));s={selectionStart:u,selectionEnd:d,value:c,beforeTxt:l,afterTxt:f}}function o(){if(a.value==null||s==null)return;const{value:u}=a.value,{beforeTxt:d,afterTxt:c,selectionStart:l}=s;if(d==null||c==null||l==null)return;let f=u.length;if(u.endsWith(c))f=u.length-c.length;else if(u.startsWith(d))f=d.length;else{const m=d[l-1],v=u.indexOf(m,l-1);v!==-1&&(f=v+1)}a.value.setSelectionRange(f,f)}return[i,o]}const Vt="ElInput",Lt=Ve({name:Vt,inheritAttrs:!1}),Ot=Ve({...Lt,props:Et,emits:It,setup(a,{expose:s,emit:i}){const o=a,u=Ze(),d=Pt(),c=qe(),l=y(()=>[o.type==="textarea"?P.b():n.b(),n.m(w.value),n.is("disabled",p.value),n.is("exceed",$e.value),{[n.b("group")]:c.prepend||c.append,[n.m("prefix")]:c.prefix||o.prefixIcon,[n.m("suffix")]:c.suffix||o.suffixIcon||o.clearable||o.showPassword,[n.bm("suffix","password-clear")]:Y.value&&ee.value,[n.b("hidden")]:o.type==="hidden"},u.class]),f=y(()=>[n.e("wrapper"),n.is("focus",Q.value)]),{form:m,formItem:v}=ht(),{inputId:z}=yt(o,{formItemContext:v}),w=mt(),p=vt(),n=ze("input"),P=ze("textarea"),j=G(),N=G(),q=K(!1),U=K(!1),de=K(),W=G(o.inputStyle),S=y(()=>j.value||N.value),{wrapperRef:Le,isFocused:Q,handleFocus:Oe,handleBlur:Re}=Ft(S,{disabled:p,afterBlur(){var e;o.validateEvent&&((e=v?.validate)==null||e.call(v,"blur").catch(r=>Pe()))}}),ce=y(()=>{var e;return(e=m?.statusIcon)!=null?e:!1}),R=y(()=>v?.validateState||""),pe=y(()=>R.value&&lt[R.value]),Ae=y(()=>U.value?rt:ut),Be=y(()=>[u.style]),fe=y(()=>[o.inputStyle,W.value,{resize:o.resize}]),F=y(()=>dt(o.modelValue)?"":String(o.modelValue)),Y=y(()=>o.clearable&&!p.value&&!o.readonly&&!!F.value&&(Q.value||q.value)),ee=y(()=>o.showPassword&&!p.value&&!!F.value),T=y(()=>o.showWordLimit&&!!o.maxlength&&(o.type==="text"||o.type==="textarea")&&!p.value&&!o.readonly&&!o.showPassword),te=y(()=>F.value.length),$e=y(()=>!!T.value&&te.value>Number(o.maxlength)),He=y(()=>!!c.suffix||!!o.suffixIcon||Y.value||o.showPassword||T.value||!!R.value&&ce.value),De=y(()=>!!Object.keys(o.modelModifiers).length),[Ke,je]=Tt(j);ot(N,e=>{if(Ue(),!T.value||o.resize!=="both"&&o.resize!=="horizontal")return;const r=e[0],{width:b}=r.contentRect;de.value={right:`calc(100% - ${b+22-10}px)`}});const A=()=>{const{type:e,autosize:r}=o;if(!(!ct||e!=="textarea"||!N.value))if(r){const b=Ie(r)?r.minRows:void 0,L=Ie(r)?r.maxRows:void 0,B=ke(N.value,b,L);W.value={overflowY:"hidden",...B},k(()=>{N.value.offsetHeight,W.value=B})}else W.value={minHeight:ke(N.value).minHeight}},Ue=(e=>{let r=!1;return()=>{var b;if(r||!o.autosize)return;((b=N.value)==null?void 0:b.offsetParent)===null||(setTimeout(e),r=!0)}})(A),V=()=>{const e=S.value,r=o.formatter?o.formatter(F.value):F.value;!e||e.value===r||o.type==="file"||(e.value=r)},me=e=>{const{trim:r,number:b}=o.modelModifiers;return r&&(e=e.trim()),b&&(e=`${Me(e)}`),o.formatter&&o.parser&&(e=o.parser(e)),e},oe=async e=>{if(he.value)return;const{lazy:r}=o.modelModifiers;let{value:b}=e.target;if(r){i(ue,b);return}if(b=me(b),String(b)===F.value){o.formatter&&V();return}Ke(),i(Z,b),i(ue,b),await k(),(o.formatter&&o.parser||!De.value)&&V(),je()},ve=async e=>{let{value:r}=e.target;r=me(r),o.modelModifiers.lazy&&i(Z,r),i(Fe,r,e),await k(),V()},{isComposing:he,handleCompositionStart:ye,handleCompositionUpdate:ge,handleCompositionEnd:be}=kt({emit:i,afterComposition:oe}),We=()=>{U.value=!U.value},Ye=()=>{var e;return(e=S.value)==null?void 0:e.focus()},Xe=()=>{var e;return(e=S.value)==null?void 0:e.blur()},_e=e=>{q.value=!1,i("mouseleave",e)},Ge=e=>{q.value=!0,i("mouseenter",e)},we=e=>{i("keydown",e)},Je=()=>{var e;(e=S.value)==null||e.select()},xe=()=>{i(Z,""),i(Fe,""),i("clear"),i(ue,"")};return J(()=>o.modelValue,()=>{var e;k(()=>A()),o.validateEvent&&((e=v?.validate)==null||e.call(v,"change").catch(r=>Pe()))}),J(F,e=>{if(!S.value)return;const{trim:r,number:b}=o.modelModifiers,L=S.value.value,B=(b||o.type==="number")&&!/^0\d/.test(L)?`${Me(L)}`:L;B!==e&&(document.activeElement===S.value&&S.value.type!=="range"&&r&&B.trim()===e||V())}),J(()=>o.type,async()=>{await k(),V(),A()}),Qe(()=>{!o.formatter&&o.parser,V(),k(A)}),s({input:j,textarea:N,ref:S,textareaStyle:fe,autosize:et(o,"autosize"),isComposing:he,focus:Ye,blur:Xe,select:Je,clear:xe,resizeTextarea:A}),(e,r)=>(h(),E("div",{class:x([t(l),{[t(n).bm("group","append")]:e.$slots.append,[t(n).bm("group","prepend")]:e.$slots.prepend}]),style:Ee(t(Be)),onMouseenter:Ge,onMouseleave:_e},[g(" input "),e.type!=="textarea"?(h(),E(ne,{key:0},[g(" prepend slot "),e.$slots.prepend?(h(),E("div",{key:0,class:x(t(n).be("group","prepend"))},[X(e.$slots,"prepend")],2)):g("v-if",!0),O("div",{ref_key:"wrapperRef",ref:Le,class:x(t(f))},[g(" prefix slot "),e.$slots.prefix||e.prefixIcon?(h(),E("span",{key:0,class:x(t(n).e("prefix"))},[O("span",{class:x(t(n).e("prefix-inner"))},[X(e.$slots,"prefix"),e.prefixIcon?(h(),I(t(D),{key:0,class:x(t(n).e("icon"))},{default:$(()=>[(h(),I(H(e.prefixIcon)))]),_:1},8,["class"])):g("v-if",!0)],2)],2)):g("v-if",!0),O("input",Se({id:t(z),ref_key:"input",ref:j,class:t(n).e("inner")},t(d),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?U.value?"text":"password":e.type,disabled:t(p),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:t(ye),onCompositionupdate:t(ge),onCompositionend:t(be),onInput:oe,onChange:ve,onKeydown:we}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),g(" suffix slot "),t(He)?(h(),E("span",{key:1,class:x(t(n).e("suffix"))},[O("span",{class:x(t(n).e("suffix-inner"))},[!t(Y)||!t(ee)||!t(T)?(h(),E(ne,{key:0},[X(e.$slots,"suffix"),e.suffixIcon?(h(),I(t(D),{key:0,class:x(t(n).e("icon"))},{default:$(()=>[(h(),I(H(e.suffixIcon)))]),_:1},8,["class"])):g("v-if",!0)],64)):g("v-if",!0),t(Y)?(h(),I(t(D),{key:1,class:x([t(n).e("icon"),t(n).e("clear")]),onMousedown:se(t(ie),["prevent"]),onClick:xe},{default:$(()=>[(h(),I(H(e.clearIcon)))]),_:1},8,["class","onMousedown"])):g("v-if",!0),t(ee)?(h(),I(t(D),{key:2,class:x([t(n).e("icon"),t(n).e("password")]),onClick:We,onMousedown:se(t(ie),["prevent"]),onMouseup:se(t(ie),["prevent"])},{default:$(()=>[(h(),I(H(t(Ae))))]),_:1},8,["class","onMousedown","onMouseup"])):g("v-if",!0),t(T)?(h(),E("span",{key:3,class:x([t(n).e("count"),t(n).is("outside",e.wordLimitPosition==="outside")])},[O("span",{class:x(t(n).e("count-inner"))},_(t(te))+" / "+_(e.maxlength),3)],2)):g("v-if",!0),t(R)&&t(pe)&&t(ce)?(h(),I(t(D),{key:4,class:x([t(n).e("icon"),t(n).e("validateIcon"),t(n).is("loading",t(R)==="validating")])},{default:$(()=>[(h(),I(H(t(pe))))]),_:1},8,["class"])):g("v-if",!0)],2)],2)):g("v-if",!0)],2),g(" append slot "),e.$slots.append?(h(),E("div",{key:1,class:x(t(n).be("group","append"))},[X(e.$slots,"append")],2)):g("v-if",!0)],64)):(h(),E(ne,{key:1},[g(" textarea "),O("textarea",Se({id:t(z),ref_key:"textarea",ref:N,class:[t(P).e("inner"),t(n).is("focus",t(Q))]},t(d),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:t(p),readonly:e.readonly,autocomplete:e.autocomplete,style:t(fe),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t(ye),onCompositionupdate:t(ge),onCompositionend:t(be),onInput:oe,onFocus:t(Oe),onBlur:t(Re),onChange:ve,onKeydown:we}),null,16,["id","name","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),t(T)?(h(),E("span",{key:0,style:Ee(de.value),class:x([t(n).e("count"),t(n).is("outside",e.wordLimitPosition==="outside")])},_(t(te))+" / "+_(e.maxlength),7)):g("v-if",!0)],64))],38))}});var Rt=it(Ot,[["__file","input.vue"]]);const Wt=pt(Rt);export{Wt as E,Ft as a,Pt as u};
